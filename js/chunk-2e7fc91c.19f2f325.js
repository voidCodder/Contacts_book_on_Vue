(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e7fc91c"],{"0031":function(t,e,n){},1153:function(t,e,n){},4245:function(t,e,n){"use strict";var i=n("0031"),a=n.n(i);a.a},eba7:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-show"},[n("transition-group",{attrs:{name:"slide-up"}},t._l(t.contact.fields,(function(e,i){return n("ContactField",{key:i,attrs:{fieldIndex:i,fieldName:e.fieldName,contactId:t.id},model:{value:e.fieldValue,callback:function(n){t.$set(e,"fieldValue",n)},expression:"field.fieldValue"}})})),1),n("div",{staticClass:"contact-show__add-field"},[n("label",{staticClass:"contact-show__label"},[t._v("Добавить поле")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newFieldName,expression:"newFieldName"}],staticClass:"input add-field__input",attrs:{type:"text"},domProps:{value:t.newFieldName},on:{input:function(e){e.target.composing||(t.newFieldName=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newFieldValue,expression:"newFieldValue"}],staticClass:"input add-field__input",attrs:{type:"text"},domProps:{value:t.newFieldValue},on:{input:function(e){e.target.composing||(t.newFieldValue=e.target.value)}}}),n("button",{staticClass:"button button_icon-plus contact-show__button",on:{click:t.addFieldToContact}},[t._v(" Добавить ")])]),n("div",{staticClass:"contact-show__footer"},[n("button",{staticClass:"button contact-show__button",attrs:{disabled:!t.canUndo},on:{click:t.canselChanges}},[t._v(" Отменить ")]),n("button",{staticClass:"button button_icon-back contact-show__button",attrs:{disabled:!t.canUndo},on:{click:t.undo}},[t._v(" Шаг назад ")]),n("button",{staticClass:"button contact-show__button",on:{click:t.saveChanges}},[t._v(" Сохранить ")])])],1)},a=[],o=n("5530"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-info"},[n("label",{staticClass:"contact-show__label"},[t._v(t._s(t.fieldName))]),n("input",{staticClass:"input contact-show__input",domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),n("button",{staticClass:"button button_icon-close contact-show__button",attrs:{disabled:t.disabled},on:{click:function(e){return t.deleteField(t.fieldIndex,t.contactId)}}},[t._v(" Удалить поле ")])])},c=[],l=(n("a9e3"),{props:{fieldName:{type:[String,Number],required:!0},fieldIndex:{type:Number,required:!0},contactId:{type:[String,Number],required:!0},value:[String,Number]},methods:{deleteField:function(t,e){var n=confirm("Вы действительно хотите удалить поле?");n&&this.$store.commit("DELETE_FIELD",{contactId:e,fieldIndex:t})}},computed:{disabled:function(){return 1==this.fieldIndex||0==this.fieldIndex}}}),d=l,u=(n("4245"),n("2877")),r=Object(u["a"])(d,s,c,!1,null,null,null),f=r.exports,h=(n("4160"),n("159b"),{data:function(){return{doneMutations:[]}},created:function(){var t=this;this.$store.subscribe((function(e){"UNDO_STARTING_STATE_FOR_CONTACT"!==e.type&&t.doneMutations.push(e)}))},methods:{undo:function(){var t=this;this.doneMutations.pop(),this.$store.commit("UNDO_STARTING_STATE_FOR_CONTACT",{initialState:JSON.parse(JSON.stringify(this.contactFieldsInitialState)),contact:this.contact}),this.doneMutations.forEach((function(e){t.$store.commit("".concat(e.type),e.payload),t.doneMutations.pop()}))}},computed:{canUndo:function(){return Boolean(this.doneMutations.length)}}}),m=n("2f62"),p={mixins:[h],components:{ContactField:f},data:function(){return{newFieldName:"",newFieldValue:"",contactFieldsInitialState:{}}},created:function(){this.contactFieldsInitialState=JSON.parse(JSON.stringify(this.contact.fields))},computed:Object(o["a"])(Object(o["a"])({id:function(){return this.$route.params.id}},Object(m["b"])(["getContact"])),{},{contact:function(){return this.getContact(this.id)},isFieldsFilled:function(){return""!==this.contact.fields[0].fieldValue&&""!==this.contact.fields[1].fieldValue}}),methods:{addFieldToContact:function(){this.newFieldName&&this.newFieldValue?(this.$store.commit("ADD_FIELD",{contact:this.contact,fieldName:this.newFieldName,fieldValue:this.newFieldValue}),this.newFieldName="",this.newFieldValue=""):alert("Заполните поля")},saveChanges:function(){this.isFieldsFilled?this.$store.commit("UPDATE_CHANGES",{updatedContact:this.contact.fields,contact:this.contact}):alert('Поля: "ФИО" и "Номер телефона" должны быть заполнены')},canselChanges:function(){var t=confirm("Вы действительно хотите отменить внесенные изменения?");t&&this.$store.commit("UPDATE_CHANGES",{updatedContact:JSON.parse(JSON.stringify(this.contactFieldsInitialState)),contact:this.contact})}}},_=p,b=(n("f45a"),Object(u["a"])(_,i,a,!1,null,null,null));e["default"]=b.exports},f45a:function(t,e,n){"use strict";var i=n("1153"),a=n.n(i);a.a}}]);
//# sourceMappingURL=chunk-2e7fc91c.19f2f325.js.map